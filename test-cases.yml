---
- summary: |
    Проверка регистрации пользователя через GitHub OAuth
  requirement: |
    Пользователь может зарегистрироваться через GitHub OAuth
  prerequisites: |
    1. Пользователь не зарегистрирован в Codebattle
    2. Пользователь имеет аккаунт GitHub
    3. Открыта главная страница Codebattle
  test-data: |
    Аккаунт GitHub с валидными учетными данными
  steps:
    - Нажимаем кнопку "Sign in with GitHub"
    - Разрешаем доступ приложению Codebattle к аккаунту GitHub
    - Подтверждаем авторизацию
  expected-result: |
    1. Пользователь успешно зарегистрирован в системе
    2. Происходит автоматический вход в систему
    3. Отображается главная страница с доступным функционалом

- summary: |
    Проверка создания игры против бота
  requirement: |
    Пользователь может создать игру против бота
  prerequisites: |
    1. Пользователь авторизован в системе
    2. Открыта главная страница Codebattle
  test-data: |
    Выбранный язык программирования: Node.js
    Выбранная задача: cube_sum
  steps:
    - Нажимаем кнопку "Create a battle"
    - Выбираем опцию "With a bot"
    - Выбираем задачу "cube_sum"
    - Выбираем язык программирования "Node.js"
    - Нажимаем кнопку "Create battle"
  expected-result: |
    1. Создается новая игровая сессия
    2. Открывается интерфейс игры с редактором кода
    3. Отображается условие задачи
    4. Бот подключен к игре

- summary: |
    Проверка работы веб-редактора кода с подсветкой синтаксиса
  requirement: |
    Система предоставляет веб-редактор кода с подсветкой синтаксиса для выбранного языка
  prerequisites: |
    1. Пользователь авторизован
    2. Открыта игровая сессия
    3. Выбран язык программирования Node.js
  test-data: |
    Тестовый код на JavaScript:
    const solution = (n) => { return n * n; }
  steps:
    - Вводим тестовый код в редактор
    - Проверяем подсветку синтаксиса
    - Проверяем автодополнение (если доступно)
  expected-result: |
    1. Код отображается с подсветкой синтаксиса JavaScript/Node.js
    2. Ключевые слова (const, return) выделяются цветом
    3. Скобки и операторы правильно подсвечены

- summary: |
    Проверка автоматической проверки решения задачи
  requirement: |
    Система автоматически проверяет решение через тесты и показывает результат
  prerequisites: |
    1. Пользователь в игровой сессии
    2. В редактор введен код решения
    3. Задача: cube_sum (сумма кубов чисел от 1 до n)
  test-data: |
    Входные данные: 5
    Ожидаемый результат: 225
    Код решения:
    const solution = (num) => {
      return Math.pow(num * (num + 1) / 2, 2);
    }
  steps:
    - Вводим код решения в редактор
    - Нажимаем кнопку "Run" или "Check"
    - Ожидаем выполнения проверки
  expected-result: |
    1. Система запускает проверку
    2. Отображается статус выполнения (прогресс)
    3. Показывается результат: "Success" или "All tests passed"
    4. Для входного значения 5 возвращается 225

- summary: |
    Проверка отображения рейтинга и статистики
  requirement: |
    Пользователь видит свой рейтинг (ELO), статистику игр и прогресс
  prerequisites: |
    1. Пользователь авторизован
    2. У пользователя есть история игр
  test-data: |
    Учетная запись с сыгранными играми
  steps:
    - Переходим в раздел профиля
    - Ищем раздел статистики
    - Проверяем отображение рейтинга ELO
    - Проверяем статистику побед/поражений
  expected-result: |
    1. Отображается текущий рейтинг ELO (числовое значение)
    2. Показана статистика: количество игр, побед, поражений
    3. Отображается прогресс или график изменения рейтинга

- summary: |
    Проверка адаптивности интерфейса для мобильных устройств
  requirement: |
    Мобильная версия интерфейса должна быть адаптивной для экранов от 320px
  prerequisites: |
    1. Открыта главная страница Codebattle
    2. Используется браузер с инструментами разработчика
  test-data: |
    Разрешения экрана для тестирования:
    - 320x568 (iPhone SE)
    - 375x667 (iPhone 8)
    - 414x896 (iPhone XR)
  steps:
    - Открываем инструменты разработчика браузера
    - Включаем режим адаптивного дизайна
    - Выбираем разрешение 320px
    - Проверяем отображение элементов
    - Тестируем навигацию и ввод кода
  expected-result: |
    1. Интерфейс корректно отображается на всех разрешениях
    2. Элементы не обрезаются и не накладываются друг на друга
    3. Кнопки и поля ввода доступны для касания
    4. Редактор кода остается функциональным

- summary: |
    Проверка конфиденциальности пользовательских данных
  requirement: |
    Все пользовательские данные (особенно код решений) должны быть конфиденциальны
  prerequisites: |
    1. Два разных пользователя авторизованы в системе
    2. Один пользователь отправил решение в игре
  test-data: |
    Пользователь A: отправил решение задачи cube_sum
    Пользователь B: пытается получить доступ к решению пользователя A
  steps:
    - Пользователь B пытается найти решение пользователя A в системе
    - Проверяем доступность через API (если есть доступ)
    - Проверяем отображение в интерфейсе
  expected-result: |
    1. Код решения пользователя A недоступен пользователю B
    2. В интерфейсе не отображаются чужие решения
    3. API не возвращает чужие решения без авторизации

# ========== НОВЫЕ ТЕСТ-КЕЙСЫ ОТ НАСТАВНИКА ==========

- summary: |
    Проверка создания игры с другом (по приглашению)
  requirement: |
    Пользователь может создать приватную игру с другом
  prerequisites: |
    1. Оба пользователя авторизованы в системе
    2. Открыта главная страница Codebattle
  test-data: |
    Пользователь A создает игру
    Пользователь B подключается по приглашению
    Выбранная задача: cube_sum
  steps:
    - Пользователь A нажимает "Create a battle"
    - Выбирает опцию "With a friend"
    - Выбирает задачу "cube_sum"
    - Копирует ссылку-приглашение или отправляет код приглашения
    - Пользователь B вставляет ссылку или вводит код приглашения
    - Нажимает "Join game"
  expected-result: |
    1. Создается приватная игровая сессия
    2. Генерируется уникальная ссылка или код приглашения
    3. Второй игрок может подключиться только по приглашению
    4. После подключения начинается игра

- summary: |
    Проверка создания игры со случайным соперником
  requirement: |
    Пользователь может создать игру со случайным соперником через матчмейкинг
  prerequisites: |
    1. Пользователь авторизован в системе
    2. Открыта главная страница Codebattle
  test-data: |
    Выбранная задача: cube_sum
  steps:
    - Нажимаем кнопку "Create a battle"
    - Выбираем опцию "With other user" (или "Random opponent")
    - Выбираем задачу "cube_sum"
    - Нажимаем кнопку "Create battle"
    - Ожидаем подключения второго игрока
  expected-result: |
    1. Создается новая игровая сессия в режиме ожидания
    2. Игра появляется в списке доступных для подключения
    3. При подключении второго игрока оба переносятся в игровое пространство
    4. Отображается интерфейс с двумя редакторами кода

- summary: |
    Проверка сценария победы в игре (первым решает задачу)
  requirement: |
    При успешной проверке решения победитель определяется и получает уведомление
  prerequisites: |
    1. Два игрока в активной игровой сессии
    2. Задача: cube_sum
  test-data: |
    Игрок 1: правильное решение задачи
    Игрок 2: неправильное решение или не решал
  steps:
    - Игрок 1 вводит правильное решение
    - Игрок 1 нажимает кнопку "Check"
    - Ожидаем завершения проверки
  expected-result: |
    1. Показывается модальное окно с сообщением о победе Игрока 1
    2. У Игрока 1 кнопка "Check" блокируется
    3. Появляется кнопка "Exit" у победителя
    4. Игрок 1 может остаться наблюдать за кодом Игрока 2
    5. Состояние игры меняется на "finished"

- summary: |
    Проверка сценария проигрыша в игре (соперник решил первым)
  requirement: |
    Проигравший может продолжать писать код после победы соперника
  prerequisites: |
    1. Два игрока в активной игровой сессии
    2. Игрок 1 уже решил задачу и победил
  test-data: |
    Игрок 2: все еще в игре после победы Игрока 1
  steps:
    - После победы Игрока 1
    - Игрок 2 пытается продолжить писать код
    - Игрок 2 нажимает кнопку "Check" со своим решением
  expected-result: |
    1. Игрок 2 может продолжать вводить код в редакторе
    2. Кнопка "Check" у Игрока 2 остается активной
    3. Игрок 2 может проверять свои решения (но победа уже за Игроком 1)
    4. Игрок 2 видит уведомление о победе Игрока 1

- summary: |
    Проверка завершения игры по истечении таймера
  requirement: |
    Игра может завершиться по истечении заданного лимита времени
  prerequisites: |
    1. Два игрока в активной игровой сессии с включенным таймером
    2. Никто не решил задачу до конца времени
  test-data: |
    Лимит времени: 10 минут
    Задача: cube_sum
  steps:
    - Запускаем игру с включенным таймером
    - Ожидаем истечения 10 минут
    - Ни один из игроков не нажимает "Check" с правильным решением
  expected-result: |
    1. По истечении времени появляется уведомление о завершении игры
    2. Победитель не определяется (ничья)
    3. Игроки видят сообщение о том, что время вышло
    4. Кнопка "Check" блокируется у обоих игроков
    5. Появляется возможность выйти из игры

- summary: |
    Проверка возможности сдаться (отказаться от игры)
  requirement: |
    Игрок может добровольно выйти из игры до ее завершения
  prerequisites: |
    1. Игрок в активной игровой сессии
    2. Игра еще не завершена (нет победителя)
  test-data: |
    Игрок решает сдаться в середине игры
  steps:
    - Во время игры находим кнопку "Give up"
    - Нажимаем кнопку сдачи
    - Подтверждаем действие в модальном окне (если требуется)
  expected-result: |
    1. Появляется подтверждение сдачи
    2. После подтверждения игрок выходит из игры
    3. Соперник получает уведомление о сдаче
    4. Соперник объявляется победителем
    5. Игра завершается
